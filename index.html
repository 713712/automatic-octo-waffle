<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>决策助手</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            color: #333;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 15px 0;
            color: white;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 10px;
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            padding: 15px;
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        
        .panel:hover {
            transform: translateY(-3px);
        }
        
        .panel h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #5a67d8;
            font-size: 1.4rem;
        }
        
        /* 转盘样式 */
        .wheel-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 0 auto 15px;
        }
        
        .wheel-svg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }
        
        .wheel-pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 25px;
            background: #e53e3e;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
        }
        
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: #4a5568;
            border-radius: 50%;
            z-index: 5;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        
        .spin-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        
        .spin-btn:hover {
            background: #5a67d8;
        }
        
        .spin-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }
        
        .result {
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            min-height: 25px;
            margin: 10px 0;
            color: #2d3748;
            padding: 5px;
            border-radius: 5px;
            background: #f7fafc;
        }
        
        .options-form {
            margin-top: 15px;
        }
        
        .wheel-title-container {
            display: flex;
            margin-bottom: 15px;
        }
        
        .wheel-title-container input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .option-item {
            display: flex;
            margin-bottom: 8px;
            align-items: center;
        }
        
        .option-item input[type="text"] {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            font-size: 0.9rem;
            min-width: 0;
        }
        
        .option-item input[type="number"] {
            width: 60px;
            padding: 8px;
            border: 1px solid #ddd;
            border-left: none;
            border-radius: 0 4px 4px 0;
            font-size: 0.9rem;
        }
        
        .add-option, .remove-option {
            padding: 8px 12px;
            margin-left: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .add-option {
            background: #48bb78;
            color: white;
        }
        
        .remove-option {
            background: #e53e3e;
            color: white;
        }
        
        .import-export {
            margin-top: 15px;
        }
        
        .import-export textarea {
            width: 100%;
            height: 80px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            font-family: monospace;
            font-size: 0.8rem;
        }
        
        /* 抛硬币样式 */
        .coin-container {
            text-align: center;
            margin: 15px 0;
        }
        
        .coin {
            width: 120px;
            height: 120px;
            margin: 0 auto;
            border-radius: 50%;
            background: linear-gradient(45deg, #d1d5db, #9ca3af);
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 1s;
            transform-style: preserve-3d;
        }
        
        .coin-front, .coin-back {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            backface-visibility: hidden;
        }
        
        .coin-front {
            background: linear-gradient(45deg, #f0f0f0, #d0d0d0);
            color: #2d3748;
        }
        
        .coin-back {
            background: linear-gradient(45deg, #e0e0e0, #c0c0c0);
            color: #e53e3e;
            transform: rotateY(180deg);
        }
        
        .coin.flipping {
            animation: flip 1.5s ease-in-out;
        }
        
        @keyframes flip {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(1800deg); }
        }
        
        /* 随机数生成器样式 */
        .random-number-generator {
            text-align: center;
        }
        
        .number-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 15px 0;
            color: #5a67d8;
            min-height: 50px;
        }
        
        .range-inputs {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        
        .range-inputs input {
            width: 45%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        /* 操作栏样式 */
        .action-bar {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .action-bar h2 {
            color: #5a67d8;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .action-btn {
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .action-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .action-btn.clear {
            background: #e53e3e;
        }
        
        .action-btn.clear:hover {
            background: #c53030;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 15px 0;
            margin-top: 15px;
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        /* SVG文字样式 */
        .wheel-text {
            fill: white;
            font-weight: bold;
            font-size: 12px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            pointer-events: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>决策助手</h1>
            <p class="subtitle">转盘、抛硬币、随机数生成器</p>
        </header>
        
        <div class="main-content">
            <!-- 决定转盘 -->
            <div class="panel">
                <h2 id="wheel-title">决定转盘</h2>
                <div class="wheel-container">
                    <div class="wheel-pointer"></div>
                    <svg class="wheel-svg" id="wheel-svg" viewBox="0 0 200 200"></svg>
                    <div class="wheel-center"></div>
                </div>
                <div class="result" id="wheel-result">点击"开始旋转"做出决定</div>
                <button class="spin-btn" id="spin-btn">开始旋转</button>
                
                <div class="options-form">
                    <div class="wheel-title-container">
                        <input type="text" id="wheel-name-input" placeholder="输入转盘名称" value="决定转盘">
                    </div>
                    
                    <h3>选项设置</h3>
                    <div id="options-container">
                        <!-- 选项将通过JavaScript动态生成 -->
                    </div>
                    <button class="add-option" id="add-option">+ 添加选项</button>
                </div>
                
                <div class="import-export">
                    <h3>导入/导出</h3>
                    <textarea id="export-data" placeholder="导出的数据将显示在这里"></textarea>
                    <button class="action-btn" id="export-btn">导出配置</button>
                    <button class="action-btn" id="import-btn">导入配置</button>
                </div>
            </div>
            
            <!-- 抛硬币 -->
            <div class="panel">
                <h2>抛硬币</h2>
                <div class="coin-container">
                    <div class="coin" id="coin">
                        <div class="coin-front">正</div>
                        <div class="coin-back">反</div>
                    </div>
                </div>
                <div class="result" id="coin-result">点击"抛硬币"开始</div>
                <button class="spin-btn" id="flip-btn">抛硬币</button>
            </div>
            
            <!-- 随机数生成器 -->
            <div class="panel">
                <h2>随机数生成器</h2>
                <div class="random-number-generator">
                    <div class="number-display" id="random-number">-</div>
                    <div class="range-inputs">
                        <input type="number" id="min-value" value="1" placeholder="最小值">
                        <input type="number" id="max-value" value="100" placeholder="最大值">
                    </div>
                    <button class="spin-btn" id="generate-btn">生成随机数</button>
                </div>
            </div>
        </div>
        
        <!-- 操作栏 -->
        <div class="action-bar">
            <h2>操作栏</h2>
            <div class="action-buttons">
                <button class="action-btn" id="save-all">保存所有配置</button>
                <button class="action-btn" id="load-all">加载配置</button>
                <button class="action-btn clear" id="clear-all">清空所有</button>
            </div>
        </div>
        
        <footer>
            <p>决策助手 &copy; 2025 | 所有决策都由你掌控</p>
        </footer>
    </div>

    <script>
        // 转盘功能
        let wheelOptions = [
            { text: "选项1", weight: 1 },
            { text: "选项2", weight: 1 },
            { text: "选项3", weight: 1 }
        ];
        
        let wheelTitle = "决定转盘";
        let isSpinning = false;
        let currentRotation = 0;
        
        // 初始化转盘
        function initWheel() {
            const svg = document.getElementById('wheel-svg');
            svg.innerHTML = '';
            
            // 计算总权重
            const totalWeight = wheelOptions.reduce((sum, option) => sum + option.weight, 0);
            
            // 创建扇形
            let startAngle = 0;
            const centerX = 100;
            const centerY = 100;
            const radius = 100;
            
            wheelOptions.forEach((option, index) => {
                const sliceAngle = (option.weight / totalWeight) * 360;
                const endAngle = startAngle + sliceAngle;
                
                // 计算扇形路径
                const x1 = centerX + radius * Math.cos(startAngle * Math.PI / 180);
                const y1 = centerY + radius * Math.sin(startAngle * Math.PI / 180);
                const x2 = centerX + radius * Math.cos(endAngle * Math.PI / 180);
                const y2 = centerY + radius * Math.sin(endAngle * Math.PI / 180);
                
                const largeArcFlag = sliceAngle > 180 ? 1 : 0;
                
                const pathData = [
                    `M ${centerX} ${centerY}`,
                    `L ${x1} ${y1}`,
                    `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2}`,
                    'Z'
                ].join(' ');
                
                // 创建扇形路径
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathData);
                path.setAttribute('fill', getColor(index));
                
                // 添加文字
                const textAngle = startAngle + sliceAngle / 2;
                const textRadius = radius * 0.7;
                const textX = centerX + textRadius * Math.cos(textAngle * Math.PI / 180);
                const textY = centerY + textRadius * Math.sin(textAngle * Math.PI / 180);
                
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', textX);
                text.setAttribute('y', textY);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('dominant-baseline', 'middle');
                text.setAttribute('class', 'wheel-text');
                text.textContent = option.text;
                
                svg.appendChild(path);
                svg.appendChild(text);
                
                startAngle = endAngle;
            });
        }
        
        // 获取颜色
        function getColor(index) {
            const colors = [
                '#FF6B6B', '#4ECDC4', '#45B7D1', '#FFBE0B', '#FB5607', 
                '#8338EC', '#3A86FF', '#06D6A0', '#118AB2', '#073B4C'
            ];
            return colors[index % colors.length];
        }
        
        // 旋转转盘（只顺时针，总是旋转，确保指针与结果一致）
        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            document.getElementById('spin-btn').disabled = true;
            document.getElementById('wheel-result').textContent = '旋转中...';
            
            const svg = document.getElementById('wheel-svg');
            const totalWeight = wheelOptions.reduce((sum, option) => sum + option.weight, 0);
            
            // 生成随机结果
            let random = Math.random() * totalWeight;
            let selectedOption = null;
            let cumulativeWeight = 0;
            
            for (let option of wheelOptions) {
                cumulativeWeight += option.weight;
                if (random <= cumulativeWeight) {
                    selectedOption = option;
                    break;
                }
            }
            
            // 计算选中选项的索引
            const optionIndex = wheelOptions.indexOf(selectedOption);
            
            // 计算选中选项的起始角度
            let startAngle = 0;
            for (let i = 0; i < optionIndex; i++) {
                startAngle += (wheelOptions[i].weight / totalWeight) * 360;
            }
            
            // 计算选中选项的角度范围
            const selectedAngle = (selectedOption.weight / totalWeight) * 360;
            
            // 计算指针需要指向的角度（指针在顶部，对应-90度）
            // 需要让选中选项的中间部分对准指针
            const targetAngle = -(startAngle + selectedAngle / 2 - 90);
            
            // 确保总是顺时针旋转（增加额外的圈数以确保总是旋转）
            const baseRotation = 5 * 360; // 至少5圈
            const extraRotation = 360 * (2 + Math.floor(Math.random() * 3)); // 额外2-4圈
            const finalRotation = currentRotation + baseRotation + extraRotation + targetAngle;
            
            // 应用旋转（只顺时针）
            svg.style.transform = `rotate(${finalRotation}deg)`;
            currentRotation = finalRotation;
            
            // 显示结果
            setTimeout(() => {
                document.getElementById('wheel-result').textContent = `结果: ${selectedOption.text}`;
                isSpinning = false;
                document.getElementById('spin-btn').disabled = false;
            }, 4000);
        }
        
        // 更新选项表单
        function updateOptionsForm() {
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            wheelOptions.forEach((option, index) => {
                const optionItem = document.createElement('div');
                optionItem.className = 'option-item';
                
                const textInput = document.createElement('input');
                textInput.type = 'text';
                textInput.value = option.text;
                textInput.placeholder = `选项 ${index + 1}`;
                textInput.addEventListener('input', () => {
                    wheelOptions[index].text = textInput.value;
                    initWheel();
                });
                
                const weightInput = document.createElement('input');
                weightInput.type = 'number';
                weightInput.min = '1';
                weightInput.value = option.weight;
                weightInput.addEventListener('input', () => {
                    wheelOptions[index].weight = parseInt(weightInput.value) || 1;
                    initWheel();
                });
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-option';
                removeBtn.textContent = '×';
                removeBtn.addEventListener('click', () => {
                    if (wheelOptions.length > 2) {
                        wheelOptions.splice(index, 1);
                        updateOptionsForm();
                        initWheel();
                    }
                });
                
                optionItem.appendChild(textInput);
                optionItem.appendChild(weightInput);
                optionItem.appendChild(removeBtn);
                container.appendChild(optionItem);
            });
        }
        
        // 添加选项
        function addOption() {
            wheelOptions.push({ text: `选项${wheelOptions.length + 1}`, weight: 1 });
            updateOptionsForm();
            initWheel();
        }
        
        // 导出配置
        function exportConfig() {
            const data = JSON.stringify({
                title: wheelTitle,
                options: wheelOptions
            });
            document.getElementById('export-data').value = data;
        }
        
        // 导入配置
        function importConfig() {
            try {
                const data = document.getElementById('export-data').value;
                if (data) {
                    const config = JSON.parse(data);
                    wheelTitle = config.title || "决定转盘";
                    wheelOptions = config.options || wheelOptions;
                    
                    document.getElementById('wheel-name-input').value = wheelTitle;
                    document.getElementById('wheel-title').textContent = wheelTitle;
                    
                    updateOptionsForm();
                    initWheel();
                    document.getElementById('wheel-result').textContent = '配置已导入';
                }
            } catch (e) {
                alert('导入失败，请检查数据格式');
            }
        }
        
        // 更新转盘标题
        function updateWheelTitle() {
            const titleInput = document.getElementById('wheel-name-input');
            wheelTitle = titleInput.value || "决定转盘";
            document.getElementById('wheel-title').textContent = wheelTitle;
        }
        
        // 抛硬币功能
        function flipCoin() {
            const coin = document.getElementById('coin');
            const result = document.getElementById('coin-result');
            
            coin.classList.add('flipping');
            result.textContent = '抛掷中...';
            
            setTimeout(() => {
                coin.classList.remove('flipping');
                const isHeads = Math.random() > 0.5;
                result.textContent = isHeads ? '结果: 正面' : '结果: 反面';
            }, 1500);
        }
        
        // 随机数生成器
        function generateRandomNumber() {
            const min = parseInt(document.getElementById('min-value').value) || 1;
            const max = parseInt(document.getElementById('max-value').value) || 100;
            
            if (min >= max) {
                document.getElementById('random-number').textContent = '错误: 最小值必须小于最大值';
                return;
            }
            
            const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
            document.getElementById('random-number').textContent = randomNumber;
        }
        
        // 保存所有配置
        function saveAll() {
            const config = {
                title: wheelTitle,
                options: wheelOptions
            };
            localStorage.setItem('decisionWheelOptions', JSON.stringify(config));
            alert('配置已保存到本地存储');
        }
        
        // 加载配置
        function loadAll() {
            const savedOptions = localStorage.getItem('decisionWheelOptions');
            if (savedOptions) {
                try {
                    const config = JSON.parse(savedOptions);
                    wheelTitle = config.title || "决定转盘";
                    wheelOptions = config.options || wheelOptions;
                    
                    document.getElementById('wheel-name-input').value = wheelTitle;
                    document.getElementById('wheel-title').textContent = wheelTitle;
                    
                    updateOptionsForm();
                    initWheel();
                    document.getElementById('wheel-result').textContent = '配置已加载';
                } catch (e) {
                    alert('加载失败');
                }
            } else {
                alert('没有找到保存的配置');
            }
        }
        
        // 清空所有
        function clearAll() {
            if (confirm('确定要清空所有配置吗？')) {
                wheelTitle = "决定转盘";
                wheelOptions = [
                    { text: "选项1", weight: 1 },
                    { text: "选项2", weight: 1 },
                    { text: "选项3", weight: 1 }
                ];
                
                document.getElementById('wheel-name-input').value = wheelTitle;
                document.getElementById('wheel-title').textContent = wheelTitle;
                
                updateOptionsForm();
                initWheel();
                document.getElementById('wheel-result').textContent = '已清空';
                document.getElementById('export-data').value = '';
                document.getElementById('random-number').textContent = '-';
                document.getElementById('coin-result').textContent = '点击"抛硬币"开始';
            }
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 初始化转盘
            updateOptionsForm();
            initWheel();
            
            // 绑定事件
            document.getElementById('spin-btn').addEventListener('click', spinWheel);
            document.getElementById('add-option').addEventListener('click', addOption);
            document.getElementById('export-btn').addEventListener('click', exportConfig);
            document.getElementById('import-btn').addEventListener('click', importConfig);
            document.getElementById('flip-btn').addEventListener('click', flipCoin);
            document.getElementById('generate-btn').addEventListener('click', generateRandomNumber);
            document.getElementById('save-all').addEventListener('click', saveAll);
            document.getElementById('load-all').addEventListener('click', loadAll);
            document.getElementById('clear-all').addEventListener('click', clearAll);
            
            // 转盘标题事件
            const titleInput = document.getElementById('wheel-name-input');
            titleInput.addEventListener('input', updateWheelTitle);
        });
    </script>
</body>
</html>            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 10px;
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            padding: 15px;
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        
        .panel:hover {
            transform: translateY(-3px);
        }
        
        .panel h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #5a67d8;
            font-size: 1.4rem;
        }
        
        /* 转盘样式 */
        .wheel-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 0 auto 15px;
        }
        
        .wheel-svg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }
        
        .wheel-pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 25px;
            background: #e53e3e;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
        }
        
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: #4a5568;
            border-radius: 50%;
            z-index: 5;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        
        .spin-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        
        .spin-btn:hover {
            background: #5a67d8;
        }
        
        .spin-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }
        
        .result {
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            min-height: 25px;
            margin: 10px 0;
            color: #2d3748;
            padding: 5px;
            border-radius: 5px;
            background: #f7fafc;
        }
        
        .options-form {
            margin-top: 15px;
        }
        
        .option-item {
            display: flex;
            margin-bottom: 8px;
        }
        
        .option-item input[type="text"] {
            flex: 3;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            font-size: 0.9rem;
        }
        
        .option-item input[type="number"] {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-left: none;
            border-radius: 0 4px 4px 0;
            font-size: 0.9rem;
        }
        
        .add-option, .remove-option {
            padding: 8px 10px;
            margin-left: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .add-option {
            background: #48bb78;
            color: white;
        }
        
        .remove-option {
            background: #e53e3e;
            color: white;
        }
        
        .import-export {
            margin-top: 15px;
        }
        
        .import-export textarea {
            width: 100%;
            height: 80px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            font-family: monospace;
            font-size: 0.8rem;
        }
        
        /* 抛硬币样式 */
        .coin-container {
            text-align: center;
            margin: 15px 0;
        }
        
        .coin {
            width: 120px;
            height: 120px;
            margin: 0 auto;
            border-radius: 50%;
            background: linear-gradient(45deg, #d1d5db, #9ca3af);
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 1s;
            transform-style: preserve-3d;
        }
        
        .coin-front, .coin-back {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            backface-visibility: hidden;
        }
        
        .coin-front {
            background: linear-gradient(45deg, #f0f0f0, #d0d0d0);
            color: #2d3748;
        }
        
        .coin-back {
            background: linear-gradient(45deg, #e0e0e0, #c0c0c0);
            color: #e53e3e;
            transform: rotateY(180deg);
        }
        
        .coin.flipping {
            animation: flip 1.5s ease-in-out;
        }
        
        @keyframes flip {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(1800deg); }
        }
        
        /* 随机数生成器样式 */
        .random-number-generator {
            text-align: center;
        }
        
        .number-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 15px 0;
            color: #5a67d8;
            min-height: 50px;
        }
        
        .range-inputs {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        
        .range-inputs input {
            width: 45%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        /* 操作栏样式 */
        .action-bar {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .action-bar h2 {
            color: #5a67d8;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .action-btn {
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .action-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .action-btn.clear {
            background: #e53e3e;
        }
        
        .action-btn.clear:hover {
            background: #c53030;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 15px 0;
            margin-top: 15px;
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        /* SVG文字样式 */
        .wheel-text {
            fill: white;
            font-weight: bold;
            font-size: 12px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            pointer-events: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>决策助手</h1>
            <p class="subtitle">转盘、抛硬币、随机数生成器</p>
        </header>
        
        <div class="main-content">
            <!-- 决定转盘 -->
            <div class="panel">
                <h2>决定转盘</h2>
                <div class="wheel-container">
                    <div class="wheel-pointer"></div>
                    <svg class="wheel-svg" id="wheel-svg" viewBox="0 0 200 200"></svg>
                    <div class="wheel-center"></div>
                </div>
                <div class="result" id="wheel-result">点击"开始旋转"做出决定</div>
                <button class="spin-btn" id="spin-btn">开始旋转</button>
                
                <div class="options-form">
                    <h3>选项设置</h3>
                    <div id="options-container">
                        <!-- 选项将通过JavaScript动态生成 -->
                    </div>
                    <button class="add-option" id="add-option">+ 添加选项</button>
                </div>
                
                <div class="import-export">
                    <h3>导入/导出</h3>
                    <textarea id="export-data" placeholder="导出的数据将显示在这里"></textarea>
                    <button class="action-btn" id="export-btn">导出配置</button>
                    <button class="action-btn" id="import-btn">导入配置</button>
                </div>
            </div>
            
            <!-- 抛硬币 -->
            <div class="panel">
                <h2>抛硬币</h2>
                <div class="coin-container">
                    <div class="coin" id="coin">
                        <div class="coin-front">正</div>
                        <div class="coin-back">反</div>
                    </div>
                </div>
                <div class="result" id="coin-result">点击"抛硬币"开始</div>
                <button class="spin-btn" id="flip-btn">抛硬币</button>
            </div>
            
            <!-- 随机数生成器 -->
            <div class="panel">
                <h2>随机数生成器</h2>
                <div class="random-number-generator">
                    <div class="number-display" id="random-number">-</div>
                    <div class="range-inputs">
                        <input type="number" id="min-value" value="1" placeholder="最小值">
                        <input type="number" id="max-value" value="100" placeholder="最大值">
                    </div>
                    <button class="spin-btn" id="generate-btn">生成随机数</button>
                </div>
            </div>
        </div>
        
        <!-- 操作栏 -->
        <div class="action-bar">
            <h2>操作栏</h2>
            <div class="action-buttons">
                <button class="action-btn" id="save-all">保存所有配置</button>
                <button class="action-btn" id="load-all">加载配置</button>
                <button class="action-btn clear" id="clear-all">清空所有</button>
            </div>
        </div>
        
        <footer>
            <p>决策助手 &copy; 2023 | 所有决策都由你掌控</p>
        </footer>
    </div>

    <script>
        // 转盘功能
        let wheelOptions = [
            { text: "选项1", weight: 1 },
            { text: "选项2", weight: 1 },
            { text: "选项3", weight: 1 }
        ];
        
        let isSpinning = false;
        let currentRotation = 0;
        
        // 初始化转盘
        function initWheel() {
            const svg = document.getElementById('wheel-svg');
            svg.innerHTML = '';
            
            // 计算总权重
            const totalWeight = wheelOptions.reduce((sum, option) => sum + option.weight, 0);
            
            // 创建扇形
            let startAngle = 0;
            const centerX = 100;
            const centerY = 100;
            const radius = 100;
            
            wheelOptions.forEach((option, index) => {
                const sliceAngle = (option.weight / totalWeight) * 360;
                const endAngle = startAngle + sliceAngle;
                
                // 计算扇形路径
                const x1 = centerX + radius * Math.cos(startAngle * Math.PI / 180);
                const y1 = centerY + radius * Math.sin(startAngle * Math.PI / 180);
                const x2 = centerX + radius * Math.cos(endAngle * Math.PI / 180);
                const y2 = centerY + radius * Math.sin(endAngle * Math.PI / 180);
                
                const largeArcFlag = sliceAngle > 180 ? 1 : 0;
                
                const pathData = [
                    `M ${centerX} ${centerY}`,
                    `L ${x1} ${y1}`,
                    `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2}`,
                    'Z'
                ].join(' ');
                
                // 创建扇形路径
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathData);
                path.setAttribute('fill', getColor(index));
                
                // 添加文字
                const textAngle = startAngle + sliceAngle / 2;
                const textRadius = radius * 0.7;
                const textX = centerX + textRadius * Math.cos(textAngle * Math.PI / 180);
                const textY = centerY + textRadius * Math.sin(textAngle * Math.PI / 180);
                
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', textX);
                text.setAttribute('y', textY);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('dominant-baseline', 'middle');
                text.setAttribute('class', 'wheel-text');
                text.textContent = option.text;
                
                svg.appendChild(path);
                svg.appendChild(text);
                
                startAngle = endAngle;
            });
        }
        
        // 获取颜色
        function getColor(index) {
            const colors = [
                '#FF6B6B', '#4ECDC4', '#45B7D1', '#FFBE0B', '#FB5607', 
                '#8338EC', '#3A86FF', '#06D6A0', '#118AB2', '#073B4C'
            ];
            return colors[index % colors.length];
        }
        
        // 旋转转盘（只顺时针，总是旋转）
        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            document.getElementById('spin-btn').disabled = true;
            document.getElementById('wheel-result').textContent = '旋转中...';
            
            const svg = document.getElementById('wheel-svg');
            const totalWeight = wheelOptions.reduce((sum, option) => sum + option.weight, 0);
            
            // 生成随机结果
            let random = Math.random() * totalWeight;
            let selectedOption = null;
            let cumulativeWeight = 0;
            
            for (let option of wheelOptions) {
                cumulativeWeight += option.weight;
                if (random <= cumulativeWeight) {
                    selectedOption = option;
                    break;
                }
            }
            
            // 计算旋转角度（总是顺时针旋转至少5圈）
            const baseRotation = 5 * 360; // 至少5圈
            const optionIndex = wheelOptions.indexOf(selectedOption);
            
            // 计算选中选项的起始角度
            let startAngle = 0;
            for (let i = 0; i < optionIndex; i++) {
                startAngle += (wheelOptions[i].weight / totalWeight) * 360;
            }
            
            // 计算选中选项的角度范围
            const selectedAngle = (selectedOption.weight / totalWeight) * 360;
            
            // 计算指针需要指向的角度（指针在顶部，对应270度）
            const targetAngle = 270 - (startAngle + selectedAngle / 2);
            
            // 确保总是顺时针旋转（增加额外的圈数以确保总是旋转）
            const extraRotation = 360 * (5 + Math.floor(Math.random() * 3)); // 额外5-7圈
            const finalRotation = currentRotation + baseRotation + extraRotation + targetAngle;
            
            // 应用旋转（只顺时针）
            svg.style.transform = `rotate(${finalRotation}deg)`;
            currentRotation = finalRotation;
            
            // 显示结果
            setTimeout(() => {
                document.getElementById('wheel-result').textContent = `结果: ${selectedOption.text}`;
                isSpinning = false;
                document.getElementById('spin-btn').disabled = false;
            }, 4000);
        }
        
        // 更新选项表单
        function updateOptionsForm() {
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            wheelOptions.forEach((option, index) => {
                const optionItem = document.createElement('div');
                optionItem.className = 'option-item';
                
                const textInput = document.createElement('input');
                textInput.type = 'text';
                textInput.value = option.text;
                textInput.placeholder = `选项 ${index + 1}`;
                textInput.addEventListener('input', () => {
                    wheelOptions[index].text = textInput.value;
                    initWheel();
                });
                
                const weightInput = document.createElement('input');
                weightInput.type = 'number';
                weightInput.min = '1';
                weightInput.value = option.weight;
                weightInput.addEventListener('input', () => {
                    wheelOptions[index].weight = parseInt(weightInput.value) || 1;
                    initWheel();
                });
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-option';
                removeBtn.textContent = '×';
                removeBtn.addEventListener('click', () => {
                    if (wheelOptions.length > 2) {
                        wheelOptions.splice(index, 1);
                        updateOptionsForm();
                        initWheel();
                    }
                });
                
                optionItem.appendChild(textInput);
                optionItem.appendChild(weightInput);
                optionItem.appendChild(removeBtn);
                container.appendChild(optionItem);
            });
        }
        
        // 添加选项
        function addOption() {
            wheelOptions.push({ text: `选项${wheelOptions.length + 1}`, weight: 1 });
            updateOptionsForm();
            initWheel();
        }
        
        // 导出配置
        function exportConfig() {
            const data = JSON.stringify(wheelOptions);
            document.getElementById('export-data').value = data;
        }
        
        // 导入配置
        function importConfig() {
            try {
                const data = document.getElementById('export-data').value;
                if (data) {
                    wheelOptions = JSON.parse(data);
                    updateOptionsForm();
                    initWheel();
                    document.getElementById('wheel-result').textContent = '配置已导入';
                }
            } catch (e) {
                alert('导入失败，请检查数据格式');
            }
        }
        
        // 抛硬币功能
        function flipCoin() {
            const coin = document.getElementById('coin');
            const result = document.getElementById('coin-result');
            
            coin.classList.add('flipping');
            result.textContent = '抛掷中...';
            
            setTimeout(() => {
                coin.classList.remove('flipping');
                const isHeads = Math.random() > 0.5;
                result.textContent = isHeads ? '结果: 正面' : '结果: 反面';
            }, 1500);
        }
        
        // 随机数生成器
        function generateRandomNumber() {
            const min = parseInt(document.getElementById('min-value').value) || 1;
            const max = parseInt(document.getElementById('max-value').value) || 100;
            
            if (min >= max) {
                document.getElementById('random-number').textContent = '错误: 最小值必须小于最大值';
                return;
            }
            
            const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
            document.getElementById('random-number').textContent = randomNumber;
        }
        
        // 保存所有配置
        function saveAll() {
            localStorage.setItem('decisionWheelOptions', JSON.stringify(wheelOptions));
            alert('配置已保存到本地存储');
        }
        
        // 加载配置
        function loadAll() {
            const savedOptions = localStorage.getItem('decisionWheelOptions');
            if (savedOptions) {
                try {
                    wheelOptions = JSON.parse(savedOptions);
                    updateOptionsForm();
                    initWheel();
                    document.getElementById('wheel-result').textContent = '配置已加载';
                } catch (e) {
                    alert('加载失败');
                }
            } else {
                alert('没有找到保存的配置');
            }
        }
        
        // 清空所有
        function clearAll() {
            if (confirm('确定要清空所有配置吗？')) {
                wheelOptions = [
                    { text: "选项1", weight: 1 },
                    { text: "选项2", weight: 1 },
                    { text: "选项3", weight: 1 }
                ];
                updateOptionsForm();
                initWheel();
                document.getElementById('wheel-result').textContent = '已清空';
                document.getElementById('export-data').value = '';
                document.getElementById('random-number').textContent = '-';
                document.getElementById('coin-result').textContent = '点击"抛硬币"开始';
            }
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 初始化转盘
            updateOptionsForm();
            initWheel();
            
            // 绑定事件
            document.getElementById('spin-btn').addEventListener('click', spinWheel);
            document.getElementById('add-option').addEventListener('click', addOption);
            document.getElementById('export-btn').addEventListener('click', exportConfig);
            document.getElementById('import-btn').addEventListener('click', importConfig);
            document.getElementById('flip-btn').addEventListener('click', flipCoin);
            document.getElementById('generate-btn').addEventListener('click', generateRandomNumber);
            document.getElementById('save-all').addEventListener('click', saveAll);
            document.getElementById('load-all').addEventListener('click', loadAll);
            document.getElementById('clear-all').addEventListener('click', clearAll);
        });
    </script>
</body>
</html>
